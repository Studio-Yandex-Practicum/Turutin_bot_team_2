# Шаблон для проектов со стилизатором Ruff

## Основное

1. Базовая версия Python - 3.11.
2. В файле `requirements_style.txt` находятся зависимости для стилистики.
3. В каталоге `src` находится базовая структура проекта
4. В файле `srd/requirements.txt` прописываются базовые зависимости.
5. В каталоге `infra` находятся настроечные файлы проекта. Здесь же размещать файлы для docker compose.

## Стилистика

Для стилизации кода используется пакеты `Ruff` и `Pre-commit`

Проверка стилистики кода осуществляется командой
```shell
ruff check
```

Если одновременно надо пофиксить то, что можно поиксить автоматически, то добавляем параметр `--fix`
```shell
ruff check --fix
```

Что бы стилистика автоматически проверялась и поправлялась при комитах надо добавить hook pre-commit к git

```shell
pre-commit install
```
## Cписок команд для настройки и запуска Alembic миграций и Docker контейнеров:

Создаем начальные настройки Alembic и структуру для миграций:
```shell
docker-compose run web alembic init migrations
```
Эта команда создаст миграцию на основе текущих моделей (из файла models.py):
```shell
docker-compose run web alembic revision --autogenerate -m "Initial migration"
```
Применяем созданные миграции к базе данных.
Можно запускать вручную или включить в docker-compose.yml для автоматического запуска:
```shell
docker-compose run alembic upgrade head
```
Запускаем приложение и базу данных PostgreSQL.
Это команда для стандартного запуска контейнеров (с пересборкой образов):
```shell
docker-compose up --build
```
Теперь контейнеры с PostgreSQL и Flask будут запущены,
а миграции будут автоматически применяться при помощи сервиса Alembic.
